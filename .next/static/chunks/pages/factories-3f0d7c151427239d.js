(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{1823:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/factories",function(){return t(6422)}])},1163:function(e,s,t){e.exports=t(3079)},6422:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var a=t(5893),r=t(7294),i=t(6725);function l(e){let{factory:s}=e;return(0,a.jsxs)("div",{className:"bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s.factory_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s.location})]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat({online:"bg-green-100 text-green-800",offline:"bg-red-100 text-red-800",maintenance:"bg-yellow-100 text-yellow-800"}[s.status]),children:"online"===s.status?"運作中":"停止運作"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"碳排放量"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:[s.carbon_emissions," 噸"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"能源消耗"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:[s.energy_consumption," kWh"]})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"效率指數"}),(0,a.jsxs)("div",{className:"text-sm font-medium text-blue-600",children:[s.efficiency_rate,"%"]})]}),(0,a.jsx)("div",{className:"mt-2 h-2 bg-gray-200 rounded-full",children:(0,a.jsx)("div",{className:"h-2 bg-blue-600 rounded-full transition-all duration-300",style:{width:"".concat(s.efficiency_rate,"%")}})})]})]})}function n(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[o,x]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/factories");if(!e.ok)throw Error("獲取廠區數據失敗");let t=await e.json();s(Array.isArray(t)?t:[])}catch(e){console.error("獲取廠區數據時發生錯誤:",e),d(e.message)}finally{n(!1)}})()},[]),t)?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"loading",children:"載入中..."})}):c?(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"error",children:["錯誤: ",c]})}):(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)("div",{className:"page-header",children:[(0,a.jsx)("h1",{className:"page-title",children:"廠區管理"}),(0,a.jsx)("p",{className:"page-subtitle",children:"管理所有廠區的基本資訊與營運狀況"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"card-header",children:[(0,a.jsx)("h2",{className:"card-title",children:"廠區列表"}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:()=>x(!0),children:"新增廠區"})]}),(0,a.jsx)("div",{className:"grid grid-cols-3",style:{gap:"1.5rem"},children:Array.isArray(e)&&e.map(e=>(0,a.jsx)(l,{factory:e},e.factory_id))}),0===e.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"尚無工廠資料"})]})]})}}},function(e){e.O(0,[725,888,774,179],function(){return e(e.s=1823)}),_N_E=e.O()}]);